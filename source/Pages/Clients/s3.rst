.. _s3:

**********
S3 clients
**********

In this page you will find documentation about the S3 clients.

.. contents:: 
    :depth: 4

======
S3curl
======

Authentication
--------------
Make sure that in the same directory where the s3curl.pl script is that there is also a file callen **.s3curl** with a content like:

.. code-block:: console

       %awsSecretAccessKeys = (
       # personal account
       AUTH_<user name> => {
           id => '<user name',
           key => '<s3 api key>'
       }
   );

Further, on line 37 of **s3curl.pl** there is a line like:

.. code-block:: perl

       my @endpoints = ( '<my endpoint>');

where you have to fill in the endpoint which is **proxy.swift.surfsara.nl** in our case. 

Create a bucket
---------------

.. code-block:: console

    ./s3curl.pl --id=AUTH_<user name> --createBucket -- https://proxy.swift.surfsara.nl/mybucket

Upload/Download an object to/from a bucket
------------------------------------------

You can upload an object to a bucket by:

.. code-block:: console

    ./s3curl.pl --id=AUTH_<user name> --put=<file name> -- https://proxy.swift.surfsara.nl/mybucket/myobject

An object can be downloaded by:

.. code-block:: console

    ./s3curl.pl --id=AUTH_<user name> -- -O https://proxy.swift.surfsara.nl/mybucket/myobject

Getting metadata
----------------

You can get an objects metadata by:

.. image:: /Images/s3getmetadata.png

Here **Content-Length** is the size in bytes and **ETag** is the md5 checksum of the object.

List buckets in an account
--------------------------

.. image:: /Images/s3listbuckets.png

This command provides output in xml. Here **xmllint** is used to get some nicer formatting.
